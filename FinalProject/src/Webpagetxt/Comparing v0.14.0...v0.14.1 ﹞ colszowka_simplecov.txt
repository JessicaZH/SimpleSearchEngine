Comparing v0.14.0...v0.14.1 · colszowka/simplecov Skip to content In this repository All GitHub ↵ Jump to ↵ No suggested jump to results In this repository All GitHub ↵ Jump to ↵ In this repository All GitHub ↵ Jump to ↵ Pull requests Issues Marketplace Explore New repository Import repository New gist New organization This repository New issue Signed in as Bricking Your profile Your repositories Your stars Your gists Help Settings Sign out Sign out Watch Notifications Not watching Be notified only when participating or @mentioned. Watch Releases only Be notified of new releases, and when participating or @mentioned. Unwatch releases Watching Be notified of all conversations. Unwatch Ignoring Never be notified. Stop ignoring 64 Unstar 3,547 Star 3,547 Fork 402 colszowka/simplecov Code Issues 59 Pull requests 10 Projects 0 Insights Permalink Comparing changes Choose two branches to see what’s changed or to start a new pull request. If you need to, you can also compare across forks. Open a pull request Create a new pull request by comparing changes across two branches. If you need to, you can also compare across forks. base fork: colszowka/simplecov Choose a Base Repository colszowka/simplecov Deradon/simplecov Epictetus/simplecov Fice/simplecov Haar/simplecov HeavenEvE/simplecov JTunnessen/simplecov KarenWest/simplecov KevinBrowne/simplecov MadanThangavelu/simplecov Manaleaking/simplecov Mykindacleaningserv23/simplecov SebastianEdwards/simplecov Suil3File/simplecov Sunnyztj/simplecov Ukropchik/simplecov adamggg/simplecov adammck/simplecov adamstegman/simplecov adriandulic/simplecov akasper/simplecov akirapanda/simplecov alagu/simplecov alexdowad/simplecov andyw8/simplecov aokolish/simplecov argerim/simplecov ashish173/simplecov avsej/simplecov bailian/simplecov bborn/simplecov benhamill/simplecov betelgeuse/simplecov bf4/simplecov brixen/simplecov caden714/simplecov cap10morgan/simplecov chetan/simplecov chondm/simplecov ciddennis/simplecov clonezone/simplecov coderanger/simplecov craiglittle/simplecov crealytics/simplecov danmilon/simplecov deepak/simplecov deivid-rodriguez/simplecov dillondrobena/simplecov djohnson/simplecov dldinternet/simplecov dleve123/simplecov dmitry/simplecov dresselm/simplecov ducknorris/simplecov dylanerichards/simplecov edipofederle/simplecov edshadi/simplecov entity1991/simplecov ersatzryan/simplecov evan-duncan/simplecov feuLio/simplecov ffomenko/simplecov fornellas/simplecov frankshearar/simplecov garysweaver/simplecov gbarzola/simplecov gcirne/simplecov geetarista/simplecov geminiyellow/simplecov geraud/simplecov gerry3/simplecov ginettev/simplecov gioele/simplecov gnuchu/simplecov goneflyin/simplecov graysonwright/simplecov grddev/simplecov grosser/simplecov gtd/simplecov hajder/simplecov hanesbarbosa/simplecov hawkwoo/simplecov htle2101/simplecov hugopeixoto/simplecov iainbeeston/simplecov igal/simplecov ileitch/simplecov infertux/simplecov isaacsanders/simplecov itrcdevs/simplecov ivan-leschinsky/simplecov jaimepedraza/simplecov jamesdabbs/simplecov japgolly/simplecov jay3126/simplecov jerrod/simplecov jigfox/simplecov jmthomas/simplecov joiggama/simplecov jonleung/simplecov jordanrs/simplecov josejlm2/simplecov joshuasiler/simplecov jshraibman-mdsol/simplecov justfalter/simplecov jwickard/simplecov kaybus8/simplecov kidaa/simplecov koteshwerrao/simplecov kxhitiz/simplecov lastobelus/simplecov lcpg/simplecov leereilly/simplecov liudongbao/simplecov lonegunman359/simplecov mallikarjunayaddala/simplecov marikhu/simplecov mariozig/simplecov matiasow/simplecov matthew342/simplecov mattwynne/simplecov mguymon/simplecov mikerobe/simplecov mondaydreaming/simplecov ms-tg/simplecov mtparet/simplecov mvz/simplecov nbibler/simplecov nbogie/simplecov nexus20001/simplecov nghialv/simplecov ngpestelos/simplecov nielsgl/simplecov nikitug/simplecov nkchouhan/simplecov noahd1/simplecov notimewaste/simplecov nozpheratu/simplecov numbata/simplecov nyarly/simplecov parndt/simplecov paulmaki/simplecov phallstrom/simplecov philipgiuliani/simplecov phillipkoebbe/simplecov piousbox/simplecov pmenglund/simplecov presto53/simplecov ptashman/simplecov punkle/simplecov quix/simplecov r7kamura/simplecov raszi/simplecov reddyonrails/simplecov rianrtsoa/simplecov rkonda/simplecov rlishtaba/simplecov rrrene/simplecov ruby/simplecov ryanatball/simplecov ryanclark2/simplecov ryanlntn/simplecov sabril/simplecov sainavaneethan/simplecov sarahikeda/simplecov sarvex/simplecov sbalentine/simplecov scotttam/simplecov shreyas123/simplecov sinclair/simplecov sinsoku/simplecov sprad/simplecov srawlins/simplecov steveklabnik/simplecov sumonsm/simplecov sunaku/simplecov swrobel/simplecov tddium/simplecov tgaff/simplecov thxmuffe/simplecov tianyicui/simplecov timproctor/simplecov tmtm/simplecov tokafish/simplecov tomeon/simplecov tommeier/simplecov tomykaira/simplecov tyre/simplecov ulugbekov/simplecov urfolomeus/simplecov v2e4lisp/simplecov valish/simplecov vicentllongo/simplecov vidyar/simplecov webdev1001/simplecov weilera/simplecov wilg/simplecov xnlogic/simplecov yazinsai/simplecov yujinakayama/simplecov Nothing to show base: v0.14.0 Choose a base branch 0-11-release 0.13.0 craiglittle-track-files-nil cshaffer-fix-parallel-builds dillondrobena-master fix-no-home-test fix-rubocop-fails fix_warnings fornellas-master gh-pages json master ms-ati-fix-cucumber-in-travis new-phantomjs readme-tweaks refine-refactoring Nothing to show head fork: colszowka/simplecov Choose a Head Repository colszowka/simplecov Deradon/simplecov Epictetus/simplecov Fice/simplecov Haar/simplecov HeavenEvE/simplecov JTunnessen/simplecov KarenWest/simplecov KevinBrowne/simplecov MadanThangavelu/simplecov Manaleaking/simplecov Mykindacleaningserv23/simplecov SebastianEdwards/simplecov Suil3File/simplecov Sunnyztj/simplecov Ukropchik/simplecov adamggg/simplecov adammck/simplecov adamstegman/simplecov adriandulic/simplecov akasper/simplecov akirapanda/simplecov alagu/simplecov alexdowad/simplecov andyw8/simplecov aokolish/simplecov argerim/simplecov ashish173/simplecov avsej/simplecov bailian/simplecov bborn/simplecov benhamill/simplecov betelgeuse/simplecov bf4/simplecov brixen/simplecov caden714/simplecov cap10morgan/simplecov chetan/simplecov chondm/simplecov ciddennis/simplecov clonezone/simplecov coderanger/simplecov craiglittle/simplecov crealytics/simplecov danmilon/simplecov deepak/simplecov deivid-rodriguez/simplecov dillondrobena/simplecov djohnson/simplecov dldinternet/simplecov dleve123/simplecov dmitry/simplecov dresselm/simplecov ducknorris/simplecov dylanerichards/simplecov edipofederle/simplecov edshadi/simplecov entity1991/simplecov ersatzryan/simplecov evan-duncan/simplecov feuLio/simplecov ffomenko/simplecov fornellas/simplecov frankshearar/simplecov garysweaver/simplecov gbarzola/simplecov gcirne/simplecov geetarista/simplecov geminiyellow/simplecov geraud/simplecov gerry3/simplecov ginettev/simplecov gioele/simplecov gnuchu/simplecov goneflyin/simplecov graysonwright/simplecov grddev/simplecov grosser/simplecov gtd/simplecov hajder/simplecov hanesbarbosa/simplecov hawkwoo/simplecov htle2101/simplecov hugopeixoto/simplecov iainbeeston/simplecov igal/simplecov ileitch/simplecov infertux/simplecov isaacsanders/simplecov itrcdevs/simplecov ivan-leschinsky/simplecov jaimepedraza/simplecov jamesdabbs/simplecov japgolly/simplecov jay3126/simplecov jerrod/simplecov jigfox/simplecov jmthomas/simplecov joiggama/simplecov jonleung/simplecov jordanrs/simplecov josejlm2/simplecov joshuasiler/simplecov jshraibman-mdsol/simplecov justfalter/simplecov jwickard/simplecov kaybus8/simplecov kidaa/simplecov koteshwerrao/simplecov kxhitiz/simplecov lastobelus/simplecov lcpg/simplecov leereilly/simplecov liudongbao/simplecov lonegunman359/simplecov mallikarjunayaddala/simplecov marikhu/simplecov mariozig/simplecov matiasow/simplecov matthew342/simplecov mattwynne/simplecov mguymon/simplecov mikerobe/simplecov mondaydreaming/simplecov ms-tg/simplecov mtparet/simplecov mvz/simplecov nbibler/simplecov nbogie/simplecov nexus20001/simplecov nghialv/simplecov ngpestelos/simplecov nielsgl/simplecov nikitug/simplecov nkchouhan/simplecov noahd1/simplecov notimewaste/simplecov nozpheratu/simplecov numbata/simplecov nyarly/simplecov parndt/simplecov paulmaki/simplecov phallstrom/simplecov philipgiuliani/simplecov phillipkoebbe/simplecov piousbox/simplecov pmenglund/simplecov presto53/simplecov ptashman/simplecov punkle/simplecov quix/simplecov r7kamura/simplecov raszi/simplecov reddyonrails/simplecov rianrtsoa/simplecov rkonda/simplecov rlishtaba/simplecov rrrene/simplecov ruby/simplecov ryanatball/simplecov ryanclark2/simplecov ryanlntn/simplecov sabril/simplecov sainavaneethan/simplecov sarahikeda/simplecov sarvex/simplecov sbalentine/simplecov scotttam/simplecov shreyas123/simplecov sinclair/simplecov sinsoku/simplecov sprad/simplecov srawlins/simplecov steveklabnik/simplecov sumonsm/simplecov sunaku/simplecov swrobel/simplecov tddium/simplecov tgaff/simplecov thxmuffe/simplecov tianyicui/simplecov timproctor/simplecov tmtm/simplecov tokafish/simplecov tomeon/simplecov tommeier/simplecov tomykaira/simplecov tyre/simplecov ulugbekov/simplecov urfolomeus/simplecov v2e4lisp/simplecov valish/simplecov vicentllongo/simplecov vidyar/simplecov webdev1001/simplecov weilera/simplecov wilg/simplecov xnlogic/simplecov yazinsai/simplecov yujinakayama/simplecov Nothing to show compare: v0.14.1 Choose a head branch 0-11-release 0.13.0 craiglittle-track-files-nil cshaffer-fix-parallel-builds dillondrobena-master fix-no-home-test fix-rubocop-fails fix_warnings fornellas-master gh-pages json master ms-ati-fix-cucumber-in-travis new-phantomjs readme-tweaks refine-refactoring Nothing to show 7 commits 7 files changed 0 commit comments 1 contributor Commits on Mar 17, 2017 PragTob Try at fixing FloatDomainError more closely restoring origin version … * Fixes #563 hopefully
* tracked the bug back to hopefully b35f569 (only thing
  that touched the caller of the method, but maybe there is some
  other interaction ongoing)
* Guess is/was that this might trigger if there aren't any lines
  covered... obviously test cases still missing to up our
  coverage here :) Loading status checks… fe29f29 Commits on Mar 18, 2017 PragTob Tests for apparent causes of error of FloatDOmainError and the like 61fcb2e PragTob Simplify coverd_strength again … This also takes the previous no_lines? case as if there are no
lines or all the lines are never lines, then relevant_lines is
also 0. Loading status checks… 05d877d PragTob More speccing and getting down to all the error cases Loading status checks… cf4b949 PragTob Basic Changelog entry [ci skip] 1522c84 PragTob Merge pull request #564 from colszowka/fix-nan-float-domain-error-563 … Fixing FloatDomainError more closely restoring origin version Loading status checks… 7b12093 PragTob Release 0.14.1 Loading status checks… 1be16d2 Unified Split Showing 7 changed files with 88 additions and 3 deletions. +7 −0 CHANGELOG.md +2 −2 lib/simplecov/source_file.rb +1 −1 lib/simplecov/version.rb +2 −0 spec/fixtures/never.rb +4 −0 spec/fixtures/skipped.rb +8 −0 spec/fixtures/skipped_and_executed.rb +64 −0 spec/source_file_spec.rb Show comments Copy path View file 7 CHANGELOG.md @@ -1,3 +1,10 @@ 0.14.1 2017-03-18 ([changes](https://github.com/colszowka/simplecov/compare/v0.14.0...v0.14.1)) ======== ## Bugfixes * Files that were skipped as a whole/had no relevant coverage could lead to Float errors. See [#564](https://github.com/colszowka/simplecov/pull/564) (thanks to @stevehanson for the report in [#563](https://github.com/colszowka/simplecov/issues/563)) 0.14.0 2017-03-15 ([changes](https://github.com/colszowka/simplecov/compare/v0.13.0...v0.14.0)) ========== Show comments Copy path View file 4 lib/simplecov/source_file.rb @@ -125,13 +125,13 @@ def covered_percent end def covered_strength return 0.0 if no_lines? return 0.0 if relevant_lines.zero? round_float(lines_strength / relevant_lines.to_f, 1) end def no_lines? lines.length.zero? || lines.length == never_lines.size lines.length.zero? || (lines.length == never_lines.size) end def lines_strength Show comments Copy path View file 2 lib/simplecov/version.rb @@ -1,5 +1,5 @@ module SimpleCov version = "0.14.0" version = "0.14.1" def version.to_a split(".").map(&:to_i) Show comments Copy path View file 2 spec/fixtures/never.rb @@ -0,0 +1,2 @@ # This class is purely some # comments Show comments Copy path View file 4 spec/fixtures/skipped.rb @@ -0,0 +1,4 @@ # Not relevant # :nocov: # Hash.new # :nocov: Show comments Copy path View file 8 spec/fixtures/skipped_and_executed.rb @@ -0,0 +1,8 @@ # So much skippping # :nocov: class Foo def bar 0 end end #:nocov: Show comments Copy path View file 64 spec/source_file_spec.rb @@ -73,5 +73,69 @@ expect(captured_output).to match(/^Warning: coverage data provided/) end end context "a file that is never relevant" do COVERAGE_FOR_NEVER_RB = [nil, nil].freeze subject do SimpleCov::SourceFile.new(source_fixture("never.rb"), COVERAGE_FOR_NEVER_RB) end it "has 0.0 covered_strength" do expect(subject.covered_strength).to eq 0.0 end it "has 0.0 covered_percent" do expect(subject.covered_percent).to eq 100.0 end end context "a file where nothing is ever executed mixed with skipping #563" do COVERAGE_FOR_SKIPPED_RB = [nil, nil, nil, nil].freeze subject do SimpleCov::SourceFile.new(source_fixture("skipped.rb"), COVERAGE_FOR_SKIPPED_RB) end it "has 0.0 covered_strength" do expect(subject.covered_strength).to eq 0.0 end it "has 0.0 covered_percent" do expect(subject.covered_percent).to eq 0.0 end end context "a file where everything is skipped and missed #563" do COVERAGE_FOR_SKIPPED_RB_2 = [nil, nil, 0, nil].freeze subject do SimpleCov::SourceFile.new(source_fixture("skipped.rb"), COVERAGE_FOR_SKIPPED_RB_2) end it "has 0.0 covered_strength" do expect(subject.covered_strength).to eq 0.0 end it "has 0.0 covered_percent" do expect(subject.covered_percent).to eq 0.0 end end context "a file where everything is skipped/irrelevamt but executed #563" do COVERAGE_FOR_SKIPPED_AND_EXECUTED_RB = [nil, nil, 1, 1, 0, nil, nil, nil].freeze subject do SimpleCov::SourceFile.new(source_fixture("skipped_and_executed.rb"), COVERAGE_FOR_SKIPPED_AND_EXECUTED_RB) end it "has 0.0 covered_strength" do expect(subject.covered_strength).to eq 0.0 end it "has 0.0 covered_percent" do expect(subject.covered_percent).to eq 0.0 end end end end Toggle all file notes No commit comments for this range © 2018 GitHub, Inc. Terms Privacy Security Status Help Contact GitHub Pricing API Training Blog About You can’t perform that action at this time. You signed in with another tab or window. Reload to refresh your session. You signed out in another tab or window. Reload to refresh your session. Press h to open a hovercard with more details.
